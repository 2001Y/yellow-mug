let img=document.querySelectorAll("main picture"),jpeg=document.getElementById("lightbox-jpeg"),webp=document.getElementById("lightbox-webp"),figcaption=document.getElementById("lightbox-figcaption"),lightbox=document.getElementById("lightbox");var LbObserver=new IntersectionObserver(handle);function handle(e){e.forEach((function(e){e.intersectionRatio&&(lbClose(),LbObserver.disconnect())}))}for(let e=0;e<img.length;++e)img[e].onclick=function(){let e=this.dataset.original,t=this.dataset.figcaption;webp.srcset=e+".webp",jpeg.src=e+".jpg",figcaption.innerHTML=t,lightbox.classList.add("open"),lightbox.classList.remove("close"),Top.style.top=pageYOffset-100+"px",Bottom.style.top=pageYOffset+innerHeight+100+"px",LbObserver.observe(Top),LbObserver.observe(Bottom)};function lbClose(){lightbox.classList.add("close"),lightbox.classList.remove("open"),setTimeout("lbDelete();",500)}function lbDelete(){webp.srcset="data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7",jpeg.src="data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7"}document.onkeydown=function(e){27==e.keyCode&&lbClose()};